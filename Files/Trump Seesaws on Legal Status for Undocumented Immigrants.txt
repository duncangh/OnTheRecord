WASHINGTON — President Trump dangled on Tuesday the prospect of a stunning reversal on immigration, first saying he is open to providing legal status for millions of undocumented immigrants and then declining to directly bring the idea up in his first speech to a joint session of Congress. Hours before the speech, Mr. Trump told reporters that "the time is right for an immigration bill as long as there is compromise on both sides."  But he made only a glancing reference to that assertion as he faced lawmakers, raising skepticism about whether he is truly shifting away from his aggressive policies toward people who are in the country illegally. In the short space of a few hours, Mr. Trump veered back and forth on the immigration issue, sparking breaking news reports and incredulous postings on Twitter as he signaled moderation, then used his address to reassert his commitment to deportations, muse about changes to a "merit based" legal immigration system, and express hope for cooperation among the long-warring political parties. In the speech, Mr. Trump repeated the harsh language that he used on the campaign trail, saying that success will not come to America "in an environment of lawless chaos."  "We must restore integrity and the rule of law to our borders," he said. He also said attracting low-skilled immigrants is contributing to the nation’s problems, and suggested modeling the country’s legal immigration system after Canada and Australia, which attract high-skilled workers. If the president chooses to embrace an overhaul that lets immigrants live and work in the country, it would represent a remarkable betrayal of many of his core supporters that comes just days after he ordered a crackdown aimed at deporting all undocumented immigrants. "Real and positive immigration reform is possible," Mr. Trump said. "If we are guided by the well-being of American citizens, then I believe Republicans and Democrats can work together to achieve an outcome that has eluded our country for decades."  Mr. Trump won the election by bluntly accusing undocumented immigrants of being "rapists and murderers" and promising to build a "beautiful wall" to keep them out of the United States. At one point during his campaign, Mr. Trump said he would consider a deportation force to swiftly round up 11 million undocumented immigrants. The president immediately put that harsh campaign-trail language into action from his desk in the Oval Office, calling for the beginning of construction along the southern border and issuing executive orders to accelerate deportations. He also suspended refugee programs and banned travel from countries he deemed to be terrorist threats. In doing so, Mr. Trump cemented his status as a hero to the conservative right, and a villain among immigration activists and his Democratic adversaries. Now, with just a few words, he may have flipped that political dynamic on its head. By potentially embracing legal status for millions of undocumented immigrants, Mr. Trump essentially endorsed the policies of former Presidents Barack Obama and George W. Bush, both of whom tried — and failed — to bring undocumented people out of the shadows by allowing them to live and work without fear of deportation. During a lunch with reporters before his speech, Mr. Trump even suggested the possibility of citizenship for the so-called Dreamers who were brought to the United States illegally as children — something that Mr. Bush never supported and Mr. Obama fell short of when he delivered immigration executive actions late in his term. It is unclear why Mr. Trump chose to suddenly contemplate changing direction. Nor is it clear whether the shift will be a lasting one that results in real efforts to build a coalition in Congress behind a comprehensive immigration overhaul that provides what conservatives have long derided as amnesty. Both Mr. Bush and Mr. Obama tried to do just that, and both failed despite the support of the business community, evangelical Christian groups, police and sheriffs organizations, immigrant rights activists, liberal think tanks, Democratic lawmakers and Latino groups. To mount a real legislative push, Mr. Trump would have to team up with some of the very coalitions that have spent the past month condemning him as a racist and a bigot. Whether those groups could put aside their dislike of the president is uncertain, at best. Reaction to the shift on Twitter on Tuesday afternoon was filled with skepticism from longtime advocates for an immigration overhaul that helps people in the country illegally. "Don’t buy it," Frank Sharry, a longtime immigration activist in Washington, wrote after word of Mr. Trump’s shift in thinking was first reported. "Trump throwing sand in faces again. 1st, was ‘he’s softening.’ Recently, ‘bad dudes first.’ Neither was true. Nor is this one."  But even more challenging for Mr. Trump would be dealing with the potential schism that a push for legalization could create between his White House and the conservative voters for whom any compromise on the immigration issue is considered heresy. Similar uprisings among conservatives nearly destroyed Senator John McCain’s presidential campaign. In his race for the Republican nomination in 2007, Mr. McCain repeatedly faced boos and jeers at campaign events and town-hall-style meetings for supporting Mr. Bush’s legislative overhaul of immigration laws. Conservative talk radio has also played a key role in trying to demand that Republican politicians oppose all attempts to legalize undocumented immigrants. Its advocacy on the airwaves helped stoke Tea Party activists to kill a similar effort by Mr. Obama in 2013. Despite that history, Mr. Trump appears to be seriously considering waging the fight over immigration. In his lunchtime discussion, he said he could be open to the idea of a legal status for millions of immigrants if his adversaries were willing to compromise, according to several people who attended the lunch. Mr. Trump did not clarify what he would seek in a compromise. But to pursue an immigration compromise — something his most ardent supporters reject out of hand — Mr. Trump would have to direct his White House staff to wage a difficult and lengthy fight on Capitol Hill. Ironically, some of his closest advisers are among the most fiercely opposed to what Mr. Trump has said he now supports. Attorney General Jeff Sessions was the Senate’s leading opponent of an immigration overhaul and regularly helped defeat any legislative proposal that would give undocumented immigrants the ability to live or work in the country legally. He repeatedly accused the Obama administration of favoring "open borders" and "amnesty."  Stephen Miller, who worked for Mr. Sessions in the Senate, is now one of the president’s top policy advisers and his chief speechwriter. He, too, is a fiery opponent of making any concessions that would benefit illegal immigrants. Now, both men are almost certainly trying to talk Mr. Trump out of his latest shift in position. If they succeed, the president may move on to other topics like health care, a tax overhaul and the need to bolster the nation’s aging infrastructure. But if they fail, Mr. Sessions and Mr. Miller might find themselves in the awkward position of having to fight for the very thing they have long worked to avoid: a future in which millions of illegal immigrants wake to find themselves not-so-illegal after all. 